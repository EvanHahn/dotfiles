#!/usr/bin/env python3
import argparse
from pathlib import Path
from sys import stdout


def main():
    parser = argparse.ArgumentParser(
        description="Get a comma-separated list of bytes from a file"
    )
    parser.add_argument("file", type=Path, help="The file to dump")
    args = parser.parse_args()

    with open(args.file, "rb") as file:
        has_written_first = False

        while True:
            chunk = file.read(1024)
            if not chunk:
                break

            for byte in chunk:
                if has_written_first:
                    stdout.write(",")
                else:
                    has_written_first = True
                stdout.write(str(byte))


if __name__ == "__main__":
    main()
