#!/usr/bin/env bash
set -e
set -u
set -o pipefail

XDG_CONFIG_HOME=${XDG_CONFIG_HOME:-$HOME/.config}
snippets_path="$XDG_CONFIG_HOME/evanhahn-snippets"

if [[ $# -ne 1 ]]; then
	ls "$snippets_path"
else
	if [[ "$1" == *".."* ]]; then
		echo 'invalid snippet name' 1>&2
		exit 1
	fi

	path="$snippets_path/$1"

	die() {
		echo "no snippet found at $path" 1>&2
		exit 1
	}

	cat "$path" 2>/dev/null || die
fi

