#!/usr/bin/env bash
set -e
set -u

if [[ "$(uname)" = 'Darwin' ]]; then
  format='pid command'
else
  format='%p %c'
fi

process_list=`ps -eo "$format"`
if [[ $# != 0 ]]; then
  process_list=`echo "$process_list" | grep -Fi "$@"`
fi

echo "$process_list" |
  grep -Fv "$BASH_SOURCE" |
  grep -Fv grep |
  GREP_COLOR='00;35' grep -E --colour=auto '^\s*[[:digit:]]+'
