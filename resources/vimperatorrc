" Vimperator
" ----------

" autocomplete with smart Firefox stuff and open tabs
set complete=lt

" only show 5 suggestions
set maxitems=5

" keep messages around for 2 seconds
set messagetimeout=2000

" DuckDuckGo search
set defsearch=duckduckgo

" set the right hintchars
set hc=jfkdlsawoeicmghqpz

" don't always focus the content
set nofocuscontent

" title shouldn't be Vimperator
set titlestring="Firefox"

" animations off
set animations=false

" hide stuff in the GUI
set toolbars=noaddons,nobookmarks,menu,navigation,tabs

" scroll three times as fast: i operate at warp speed
nnoremap j 3j
nnoremap k 3k
nnoremap h 3h
nnoremap l 3l

" make some shortcuts more like Vimium
nnoremap J gt
nnoremap K gT
nnoremap x :tabclose<cr>

" stay in insert mode
nnoremap I <S-Esc>

" show link destination in status line
set showstatuslinks=1

" hint styles
hi Hint font-family: sans-serif; font-size: 10px; font-weight: bold; text-transform: uppercase; color: black; background: #f0f0f0; border: 1px solid #ddd; padding: .25em .5em; margin-top: -.25em; margin-left: -.5em; border-radius: 5px; text-shadow: 0 1px 0 #fff;
hi HintElem nothing: yes;

" other styles
hi Normal font-family: Inconsolata, Consolas, Monaco, monospace; font-size: 16px; background: white; color: black;
hi CmdLine>* font-family: Inconsolata, Consolas, Monaco, monospace; font-size: 14px;
set ani

" ignorekeys
ignorekeys add mail\\.google\\.com
ignorekeys add drive\\.google\\.com

" Firefox
" -------

" DuckDuckGo
set! browser.startup.homepage=https://duckduckgo.com/?kae=d&kak=-1&kad=en_US&kl=us-en&kj=443333
set! browser.search.selectedEngine=DuckDuckGo
set! browser.search.defaultenginename=DuckDuckGo
set! keyword.URL=https://duckduckgo.com/?kae=d&kak=-1&kad=en_US&kl=us-en&kj=443333&q=
set! browser.search.suggest.enabled=false
set! browser.search.update=true

" full URLs don't scare me
set! browser.urlbar.trimURLs=false

" new tab page is about:blank
set! browser.newtab.url=about:blank

" enable pipelining
set! network.http.pipelining=true
set! network.http.pipelining.maxrequests=64
set! network.http.max-connections=64
set! network.http.max-connections-per-server=64

" tabs on bottom; slightly more space
set! browser.tabs.onTop=true

" close button on end
set! browser.tabs.closeButtons=3

" no warnings
set! browser.tabs.warnOnClose=false
set! browser.tabs.warnOnCloseOtherTabs=false
set! browser.tabs.warnOnOpen=false
set! general.warnOnAboutConfig=false

" open tabs to the right of the current
set! browser.tabs.insertRelatedAfterCurrent=true
set! browser.tabs.insertRelatedAfterCurrent.override=true

" what to clear after shutdown?
set! privacy.clearOnShutdown.cache=false
set! privacy.clearOnShutdown.cookies=true
set! privacy.clearOnShutdown.downloads=true
set! privacy.clearOnShutdown.formdata=true
set! privacy.clearOnShutdown.history=false
set! privacy.clearOnShutdown.offlineApps=true
set! privacy.clearOnShutdown.passwords=true
set! privacy.clearOnShutdown.sessions=true
set! privacy.clearOnShutdown.siteSettings=true

" clear cookies on close or in a day
set! network.cookie.lifetimePolicy=2
set! network.cookie.lifetime.days=1

" clear last download location when we run this file
set! browser.download.lastDir=""

" sup NSA
set! privacy.donottrackheader.enabled=true

" private browsing settings
set! browser.privatebrowsing.autostart=false
set! browser.privatebrowsing.dont_prompt_on_enter=true

" don't check if we're the default browser
set! browser.shell.checkDefaultBrowser=false

" don't wait to install extensions
set! security.dialog_enable_delay=0

" make sure CSP is enabled
set! security.csp.enable=true

" I've seen the rights thing
set! browser.rights.3.shown=true

" spellcheck in <inputs> too
set! layout.spellcheckDefault=2

" custom UA for privacy
set! general.useragent.override="Mozilla/5.0 (Windows NT 6.1; WOW64; rv:28.0) Gecko/20100101 Firefox/36.0"

" view that source
set! view_source.syntax_highlight=true
set! view_source.wrap_long_lines=true

" Security (also see NoScript stuff below)
" ----------------------------------------

" only cookies from origins
set! network.cookie.cookieBehavior=1

" what if Google...couldn't see everything I downloaded?
set! browser.safebrowsing.appRepURL=""
set! browser.safebrowsing.debug=false
set! browser.safebrowsing.downloads.enabled=false
set! browser.safebrowsing.downloads.remote.enabled=false
set! browser.safebrowsing.enabled=false
set! browser.safebrowsing.gethashURL=""
set! browser.safebrowsing.malware.enabled=false
set! browser.safebrowsing.malware.reportURL=""
set! browser.safebrowsing.reportErrorURL=""
set! browser.safebrowsing.reportGenericURL=""
set! browser.safebrowsing.reportMalwareErrorURL=""
set! browser.safebrowsing.reportMalwareURL=""
set! browser.safebrowsing.reportPhishURL=""
set! browser.safebrowsing.reportURL=""
set! browser.safebrowsing.updateURL=""

" send referrer headers only to the same domain
set! network.http.sendRefererHeader=1
set! network.http.referer.XOriginPolicy=1
set! network.http.referer.spoofSource=true
set! network.http.referer.trimmingPolicy=2

" Greasemonkey
" ------------

" operate in complete darkness and evil
set! extensions.greasemonkey.stats.optedin=false

" shut up
set! extensions.greasemonkey.installDelay=1
set! extensions.greasemonkey.stats.prompted=true

" Ghostery
" --------

" we've already gone through the tutorial
set! extensions.ghostery.tutorial=true

" make Ghostery more ghostlike
set! extensions.ghostery.showBubble=false
set! extensions.ghostery.showBugCount=false
set! extensions.ghostery.showClick2Play=false
set! extensions.ghostery.showClick2PlayButton=false
set! extensions.ghostery.toolbarButton=false

" autoupdate bugs and stuff
set! extensions.ghostery.updateNotification=false
set! extensions.ghostery.autoUpdateBugs=true

" other blockings
set! extensions.ghostery.cookieProtect=true
set! extensions.ghostery.enableCleanup=true
set! extensions.ghostery.blockFrame=true
set! extensions.ghostery.blockImage=true
set! extensions.ghostery.blockObject=true
set! extensions.ghostery.preventRedirect=false
set! extensions.ghostery.blockingMode=0

" LastPass
" --------

" damn these keys are hot
set! extensions.lastpass.defaultffidHkKeyCode=0
set! extensions.lastpass.defaultffidHkMods=""
set! extensions.lastpass.generateHkKeyCode=0
set! extensions.lastpass.generateHkMods=""
set! extensions.lastpass.homeHkKeyCode=0
set! extensions.lastpass.homeHkMods=""
set! extensions.lastpass.nextHkKeyCode=76
set! extensions.lastpass.nextHkMods="control shift"
set! extensions.lastpass.prevHkKeyCode=0
set! extensions.lastpass.prevHkMods=""
set! extensions.lastpass.recheckHkKeyCode=0
set! extensions.lastpass.recheckHkMods=""
set! extensions.lastpass.saveallHkKeyCode=0
set! extensions.lastpass.saveallHkMods=""
set! extensions.lastpass.searchHkKeyCode=0
set! extensions.lastpass.searchHkMods=""
set! extensions.lastpass.submitHkKeyCode=0
set! extensions.lastpass.submitHkMods=""

" what to show and hide?
set! extensions.lastpass.showChangePasswordNotifications=true
set! extensions.lastpass.showFillNotifications=false
set! extensions.lastpass.showFormFillNotifications=true
set! extensions.lastpass.showHomepageAfterLogin=false
set! extensions.lastpass.showLoginNotifications=false
set! extensions.lastpass.showNotifications=false
set! extensions.lastpass.showSaveSiteNotifications=true

" a better icon
set! extensions.lastpass.Icon=1

" I will remember you / will you remember me
set! extensions.lastpass.rememberUsername=true
set! extensions.lastpass.rememberPassword=false

" speak American
set! extensions.lastpass.language=en-US

" Pocket
" ------

" sync everything offline
set! extensions.isreaditlater.autoOffline=true
set! extensions.isreaditlater.autoSync=true
set! extensions.isreaditlater.getOfflineText=true
set! extensions.isreaditlater.getOfflineWeb=true

" only the hottest keys
set! extensions.isreaditlater.hotkey_click_mode=""
set! extensions.isreaditlater.hotkey_gr=""
set! extensions.isreaditlater.hotkey_open_list=""
set! extensions.isreaditlater.hotkey_push=""
set! extensions.isreaditlater.hotkey_sidebar=""
set! extensions.isreaditlater.hotkey_toggle="alt shift||P"

" misc.
set! extensions.isreaditlater.autoCloseTab=false

" Tree Style Tab
" --------------

" tab display
set! extensions.treestyletab.twisty.style="sidebar"
set! extensions.treestyletab.tabbar.invertTabContents=false

" no indent
set! extensions.treestyletab.maxTreeLevel.vertical=0

" omnipresent tabs
set! extensions.treestyletab.tabbar.autoHide.mode=0
set! extensions.treestyletab.tabbar.autoHide.mode.fullscreen=0

" vertical tabs
set! extensions.treestyletab.autoAttach.duplicateTabCommand=0
set! extensions.treestyletab.autoAttach.duplicateTabCommand.back=0
set! extensions.treestyletab.autoAttach.duplicateTabCommand.forward=0
set! extensions.treestyletab.autoAttach.fromCurrent=1
set! extensions.treestyletab.autoAttach.goButton=0
set! extensions.treestyletab.autoAttach.newTabButton=0
set! extensions.treestyletab.autoAttach.newTabCommand=0
set! extensions.treestyletab.autoAttach.searchResult=0

" drop links like it's hot
set! extensions.treestyletab.dropLinksOnTab.behavior=2

" context items
set! extensions.treestyletab.show.context-item-bookmarkTabSubtree=false
set! extensions.treestyletab.show.context-item-collapseAllSubtree=false
set! extensions.treestyletab.show.context-item-expandAllSubtree=false
set! extensions.treestyletab.show.context-item-reloadDescendantTabs=false
set! extensions.treestyletab.show.context-item-reloadTabSubtree=true
set! extensions.treestyletab.show.context-item-removeAllTabsButThisTree=false
set! extensions.treestyletab.show.context-item-removeDescendantTabs=true
set! extensions.treestyletab.show.context-item-removeTabSubtree=true
set! extensions.treestyletab.show.context-item-toggleAutoHide=false
set! extensions.treestyletab.show.context-item-toggleFixed=false

" no collapsing
set! extensions.treestyletab.allowSubtreeCollapseExpand.horizontal=false
set! extensions.treestyletab.allowSubtreeCollapseExpand.vertical=false

" NoScript and forbidden things
" -----------------------------

" what is forbidden?
set! noscript.forbidBookmarklets=true
set! noscript.forbidFrames=true
set! noscript.forbidIFrames=true
set! noscript.forbidSilverlight=true
set! noscript.noping=true
set! noscript.nosniff=true
set! security.enable_java=false
set! browser.frames.enabled=false
set! browser.formfill.enable=false
set! toolkit.telemetry.enabled=false
set! datareporting.healthreport.uploadEnabled=false
set! social.enabled=false
set! social.remote-install.enabled=false
set! social.sidebar.open=false
set! social.toast-notifications.enabled=false
set! social.whitelist=
set! plugins.click_to_play=true
set! plugin.state.googletalkbrowserplugin=0
set! plugin.state.java=0
set! plugin.state.npgtpo3dautoplugin=0
set! plugin.state.o1dbrowserplugin=0
set! plugin.state.onlivegameclientdetector=0

" what is allowed? javascript, ironically
set! noscript.global=true
set! noscript.forbidFlash=false
set! noscript.forbidFonts=false
set! noscipt.forbidMedia=false
set! noscript.forbidWebGL=false

" goodbye, ABE
set! noscript.ABE.enabled=false

" don't prevent clickjacking on trusted sites
set! noscript.clearClick=1

" what's in the context menu?
set! noscript.showAbout=false
set! noscript.showAddress=false
set! noscript.showAllowPage=true
set! noscript.showBaseDomain=true
set! noscript.showBlankSources=false
set! noscript.showBlockedObjects=false
set! noscript.showDistrust=true
set! noscript.showDomain=false
set! noscript.showExternalFilters=true
set! noscript.showGlobal=false
set! noscript.showPermanent=true
set! noscript.showPlaceholder=true
set! noscript.showRecentlyBlocked=false
set! noscript.showRevokeTemp=false
set! noscript.showTemp=true
set! noscript.showTempAllowPage=true
set! noscript.showTempToPerm=false
set! noscript.showUntrusted=true
set! noscript.showUntrustedPlaceholder=true

" shut up
set! noscript.notify=false
set! noscript.notify.bottom=false
set! noscript.clearClick.prompt=false
set! noscript.sound=false
set! noscript.ABE.notify=false
set! noscript.forbidMetaRefresh.notify=false
set! noscript.xss.notify=false
